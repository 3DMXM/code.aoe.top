(function(){var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:m,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:m,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:m,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,video:/^ *\[video\]([https?:\/\/[^\s<]+[^<.,:;"')\]\s]])\[\/video\]/};e.bullet=/(?:[*+-]|\d+\.)/;e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;e.item=d(e.item,"gm")(/bull/g,e.bullet)();e.list=d(e.list)(/bull/g,e.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+e.def.source+")")();e.blockquote=d(e.blockquote)("def",e.def)();e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";e.html=d(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)();e.paragraph=d(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)();e.normal=j({},e);e.gfm=j({},e.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/});e.gfm.paragraph=d(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source.replace("\\1","\\3")+"|")();e.tables=j({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function b(n){this.tokens=[];this.tokens.links={};this.options=n||a.defaults;this.rules=e.normal;if(this.options.gfm){if(this.options.tables){this.rules=e.tables}else{this.rules=e.gfm}}}b.rules=e;b.lex=function(p,n){var o=new b(n);return o.lex(p)};b.prototype.lex=function(n){n=n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(n,true)};b.prototype.token=function(o,u,y){var o=o.replace(/^ +$/gm,""),s,q,w,t,v,x,n,r,p;while(o){if(w=this.rules.newline.exec(o)){o=o.substring(w[0].length);if(w[0].length>1){this.tokens.push({type:"space"})}}if(w=this.rules.code.exec(o)){o=o.substring(w[0].length);w=w[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:!this.options.pedantic?w.replace(/\n+$/,""):w});continue}if(w=this.rules.fences.exec(o)){o=o.substring(w[0].length);this.tokens.push({type:"code",lang:w[2],text:w[3]||""});continue}if(w=this.rules.heading.exec(o)){o=o.substring(w[0].length);this.tokens.push({type:"heading",depth:w[1].length,text:w[2]});continue}if(u&&(w=this.rules.nptable.exec(o))){o=o.substring(w[0].length);x={type:"table",header:w[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:w[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:w[3].replace(/\n$/,"").split("\n")};for(r=0;r<x.align.length;r++){if(/^ *-+: *$/.test(x.align[r])){x.align[r]="right"}else{if(/^ *:-+: *$/.test(x.align[r])){x.align[r]="center"}else{if(/^ *:-+ *$/.test(x.align[r])){x.align[r]="left"}else{x.align[r]=null}}}}for(r=0;r<x.cells.length;r++){x.cells[r]=x.cells[r].split(/ *\| */)}this.tokens.push(x);continue}if(w=this.rules.lheading.exec(o)){o=o.substring(w[0].length);this.tokens.push({type:"heading",depth:w[2]==="="?1:2,text:w[1]});continue}if(w=this.rules.hr.exec(o)){o=o.substring(w[0].length);this.tokens.push({type:"hr"});continue}if(w=this.rules.blockquote.exec(o)){o=o.substring(w[0].length);this.tokens.push({type:"blockquote_start"});w=w[0].replace(/^ *> ?/gm,"");this.token(w,u,true);this.tokens.push({type:"blockquote_end"});continue}if(w=this.rules.list.exec(o)){o=o.substring(w[0].length);t=w[2];this.tokens.push({type:"list_start",ordered:t.length>1});w=w[0].match(this.rules.item);s=false;p=w.length;r=0;for(;r<p;r++){x=w[r];n=x.length;x=x.replace(/^ *([*+-]|\d+\.) +/,"");if(~x.indexOf("\n ")){n-=x.length;x=!this.options.pedantic?x.replace(new RegExp("^ {1,"+n+"}","gm"),""):x.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&r!==p-1){v=e.bullet.exec(w[r+1])[0];if(t!==v&&!(t.length>1&&v.length>1)){o=w.slice(r+1).join("\n")+o;r=p-1}}q=s||/\n\n(?!\s*$)/.test(x);if(r!==p-1){s=x.charAt(x.length-1)==="\n";if(!q){q=s}}this.tokens.push({type:q?"loose_item_start":"list_item_start"});this.token(x,false,y);this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}if(w=this.rules.html.exec(o)){o=o.substring(w[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(w[1]==="pre"||w[1]==="script"||w[1]==="style"),text:w[0]});continue}if((!y&&u)&&(w=this.rules.def.exec(o))){o=o.substring(w[0].length);this.tokens.links[w[1].toLowerCase()]={href:w[2],title:w[3]};continue}if(u&&(w=this.rules.table.exec(o))){o=o.substring(w[0].length);x={type:"table",header:w[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:w[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:w[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(r=0;r<x.align.length;r++){if(/^ *-+: *$/.test(x.align[r])){x.align[r]="right"}else{if(/^ *:-+: *$/.test(x.align[r])){x.align[r]="center"}else{if(/^ *:-+ *$/.test(x.align[r])){x.align[r]="left"}else{x.align[r]=null}}}}for(r=0;r<x.cells.length;r++){x.cells[r]=x.cells[r].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(x);continue}if(u&&(w=this.rules.paragraph.exec(o))){o=o.substring(w[0].length);this.tokens.push({type:"paragraph",text:w[1].charAt(w[1].length-1)==="\n"?w[1].slice(0,-1):w[1]});continue}if(w=this.rules.text.exec(o)){o=o.substring(w[0].length);this.tokens.push({type:"text",text:w[0]});continue}if(w=this.rules.video.exec(o)){o=o.substring(w[0].length);this.tokens.push({type:"video",text:w[0]});continue}if(o){throw new Error("Infinite loop on byte: "+o.charCodeAt(0))}}return this.tokens};var i={video:/^ *\[video\](.*[^\s^\[])\[\/video\]/,escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:m,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:m,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};i._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;i._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;i.link=d(i.link)("inside",i._inside)("href",i._href)();i.reflink=d(i.reflink)("inside",i._inside)();i.normal=j({},i);i.pedantic=j({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});i.gfm=j({},i.normal,{escape:d(i.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:d(i.text)("]|","~]|")("|","|https?://|")()});i.breaks=j({},i.gfm,{br:d(i.br)("{2,}","*")(),text:d(i.gfm.text)("{2,}","*")()});function k(n,o){this.options=o||a.defaults;this.links=n;this.rules=i.normal;this.renderer=this.options.renderer||new g;this.renderer.options=this.options;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=i.breaks}else{this.rules=i.gfm}}else{if(this.options.pedantic){this.rules=i.pedantic}}}k.rules=i;k.output=function(q,n,o){var p=new k(n,o);return p.output(q)};k.prototype.output=function(s){var o="",q,r,n,p;while(s){if(p=this.rules.escape.exec(s)){s=s.substring(p[0].length);o+=p[1];continue}if(p=this.rules.autolink.exec(s)){s=s.substring(p[0].length);if(p[2]==="@"){r=p[1].charAt(6)===":"?this.mangle(p[1].substring(7)):this.mangle(p[1]);n=this.mangle("mailto:")+r}else{r=l(p[1]);n=r}o+=this.renderer.link(n,null,r);continue}if(p=this.rules.video.exec(s)){s=s.substring(p[0].length);o+=this.renderer.video(l(this.smartypants(p[1])));continue}if(!this.inLink&&(p=this.rules.url.exec(s))){s=s.substring(p[0].length);r=l(p[1]);n=r;o+=this.renderer.link(n,null,r);continue}if(p=this.rules.tag.exec(s)){if(!this.inLink&&/^<a /i.test(p[0])){this.inLink=true}else{if(this.inLink&&/^<\/a>/i.test(p[0])){this.inLink=false}}s=s.substring(p[0].length);o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(p[0]):l(p[0]):p[0];continue}if(p=this.rules.link.exec(s)){s=s.substring(p[0].length);this.inLink=true;o+=this.outputLink(p,{href:p[2],title:p[3]});this.inLink=false;continue}if((p=this.rules.reflink.exec(s))||(p=this.rules.nolink.exec(s))){s=s.substring(p[0].length);q=(p[2]||p[1]).replace(/\s+/g," ");q=this.links[q.toLowerCase()];if(!q||!q.href){o+=p[0].charAt(0);s=p[0].substring(1)+s;continue}this.inLink=true;o+=this.outputLink(p,q);this.inLink=false;continue}if(p=this.rules.strong.exec(s)){s=s.substring(p[0].length);o+=this.renderer.strong(this.output(p[2]||p[1]));continue}if(p=this.rules.em.exec(s)){s=s.substring(p[0].length);o+=this.renderer.em(this.output(p[2]||p[1]));continue}if(p=this.rules.code.exec(s)){s=s.substring(p[0].length);o+=this.renderer.codespan(l(p[2],true));continue}if(p=this.rules.br.exec(s)){s=s.substring(p[0].length);o+=this.renderer.br();continue}if(p=this.rules.del.exec(s)){s=s.substring(p[0].length);o+=this.renderer.del(this.output(p[1]));continue}if(p=this.rules.text.exec(s)){s=s.substring(p[0].length);o+=this.renderer.text(l(this.smartypants(p[0])));continue}if(s){throw new Error("Infinite loop on byte: "+s.charCodeAt(0))}}return o};k.prototype.outputLink=function(o,p){var n=l(p.href),q=p.title?l(p.title):null;return o[0].charAt(0)!=="!"?this.renderer.link(n,q,this.output(o[1])):this.renderer.image(n,q,l(o[1]))};k.prototype.smartypants=function(n){if(!this.options.smartypants){return n}return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")};k.prototype.mangle=function(r){if(!this.options.mangle){return r}var o="",n=r.length,p=0,q;for(;p<n;p++){q=r.charCodeAt(p);if(Math.random()>0.5){q="x"+q.toString(16)}o+="&#"+q+";"}return o};function g(n){this.options=n||{}}g.prototype.code=function(o,q,p){if(this.options.highlight){var n=this.options.highlight(o,q);if(n!=null&&n!==o){p=true;o=n}}if(!q){return"<pre><code>"+(p?o:l(o,true))+"\n</code></pre>"}return'<pre><code class="'+this.options.langPrefix+l(q,true)+'">'+(p?o:l(o,true))+"\n</code></pre>\n"};g.prototype.blockquote=function(n){return"<blockquote>\n"+n+"</blockquote>\n"};g.prototype.html=function(n){return n};g.prototype.heading=function(o,p,n){return"<h"+p+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+o+"</h"+p+">\n"};g.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};g.prototype.list=function(n,o){var p=o?"ol":"ul";return"<"+p+">\n"+n+"</"+p+">\n"};g.prototype.listitem=function(n){return"<li>"+n+"</li>\n"};g.prototype.paragraph=function(n){return"<p>"+n+"</p>\n"};g.prototype.table=function(o,n){return"<table>\n<thead>\n"+o+"</thead>\n<tbody>\n"+n+"</tbody>\n</table>\n"};g.prototype.tablerow=function(n){return"<tr>\n"+n+"</tr>\n"};g.prototype.tablecell=function(q,o){var p=o.header?"th":"td";var n=o.align?"<"+p+' style="text-align:'+o.align+'">':"<"+p+">";return n+q+"</"+p+">\n"};g.prototype.strong=function(n){return"<strong>"+n+"</strong>"};g.prototype.em=function(n){return"<em>"+n+"</em>"};g.prototype.codespan=function(n){return"<code>"+n+"</code>"};g.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"};g.prototype.del=function(n){return"<del>"+n+"</del>"};g.prototype.link=function(n,s,r){if(this.options.sanitize){try{var p=decodeURIComponent(h(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(q){return""}if(p.indexOf("javascript:")===0||p.indexOf("vbscript:")===0){return""}}var o='<a href="'+n+'"';if(s){o+=' title="'+s+'"'}o+=">"+r+"</a>";return o};g.prototype.image=function(n,q,p){var o='<img src="'+n+'" alt="'+p+'"';if(q){o+=' title="'+q+'"'}o+=this.options.xhtml?"/>":">";return o};g.prototype.text=function(n){return n};g.prototype.video=function(n){n=c(n);console.log(n);let out='<iframe height="375" width="500" src="'+n+'" frameborder="no" allowfullscreen="true"></iframe>';return out};function c(n){if(!n){return""}n=n.replace(/www\.bilibili\.com\/video\/av([\d]+)/i,"player.bilibili.com/player.html?aid=$1").replace(/www\.bilibili\.com\/video\/BV([\w]+)/i,"player.bilibili.com/player.html?bvid=BV$1").replace(/v\.youku\.com\/v_show\/id_([\w\-=]+)\.html/i,"player.youku.com/embed/$1").replace(/player\.youku\.com\/embed\/([\w\-=]+)\./i,"player.youku.com/embed/$1").replace(/youtu.be\/(\w+)$/i,"www.youtube.com/embed/$1").replace(/(www\.)?youtube\.com\/watch\?v=([\w\-]+)/i,"www.youtube.com/embed/$2").replace(/v\.qq\.com\/cover\/[\w]+\/[\w]+\/([\w]+)\.html/i,"v.qq.com/txp/iframe/player.html?vid=$1").replace(/v\.qq\.com\/x\/page\/([\w]+)\.html/i,"v.qq.com/txp/iframe/player.html?vid=$1").replace(/v\.qq\.com\/.+[\?\&]vid=([^&]+).*$/i,"v.qq.com/txp/iframe/player.html?vid=$1").replace(/www\.tudou\.com\/programs\/view\/([\w\-]+)\/?/i,"player.youku.com/embed/$1").replace(/video\.tudou\.com\/v\/([\w]+)/,"player.youku.com/embed/$1");return n}function f(n){this.tokens=[];this.token=null;this.options=n||a.defaults;this.options.renderer=this.options.renderer||new g;this.renderer=this.options.renderer;this.renderer.options=this.options}f.parse=function(p,n,o){var q=new f(n,o);return q.parse(p)};f.prototype.parse=function(o){this.inline=new k(o.links,this.options,this.renderer);this.tokens=o.reverse();var n="";while(this.next()){n+=this.tok()}return n};f.prototype.next=function(){return this.token=this.tokens.pop()};f.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};f.prototype.parseText=function(){var n=this.token.text;while(this.peek().type==="text"){n+="\n"+this.next().text}return this.inline.output(n)};f.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var r="",t="",p,v,u,n,o;u="";for(p=0;p<this.token.header.length;p++){n={header:true,align:this.token.align[p]};u+=this.renderer.tablecell(this.inline.output(this.token.header[p]),{header:true,align:this.token.align[p]})}r+=this.renderer.tablerow(u);for(p=0;p<this.token.cells.length;p++){v=this.token.cells[p];u="";for(o=0;o<v.length;o++){u+=this.renderer.tablecell(this.inline.output(v[o]),{header:false,align:this.token.align[o]})}t+=this.renderer.tablerow(u)}return this.renderer.table(r,t);case"blockquote_start":var t="";while(this.next().type!=="blockquote_end"){t+=this.tok()}return this.renderer.blockquote(t);case"list_start":var t="",s=this.token.ordered;while(this.next().type!=="list_end"){t+=this.tok()}return this.renderer.list(t,s);case"list_item_start":var t="";while(this.next().type!=="list_item_end"){t+=this.token.type==="text"?this.parseText():this.tok()}return this.renderer.listitem(t);case"loose_item_start":var t="";while(this.next().type!=="list_item_end"){t+=this.tok()}return this.renderer.listitem(t);case"html":var q=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(q);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};function l(n,o){return n.replace(!o?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(n){return n.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(o,p){p=p.toLowerCase();if(p==="colon"){return":"}if(p.charAt(0)==="#"){return p.charAt(1)==="x"?String.fromCharCode(parseInt(p.substring(2),16)):String.fromCharCode(+p.substring(1))}return""})}function d(p,o){p=p.source;o=o||"";return function n(q,r){if(!q){return new RegExp(p,o)}r=r.source||r;r=r.replace(/(^|[^\[])\^/g,"$1");p=p.replace(q,r);return n}}function m(){}m.exec=m;function j(q){var o=1,p,n;for(;o<arguments.length;o++){p=arguments[o];for(n in p){if(Object.prototype.hasOwnProperty.call(p,n)){q[n]=p[n]}}}return q}function a(n,p,v){if(v||typeof p==="function"){if(!v){v=p;p=null}p=j({},a.defaults,p||{});var q=p.highlight,u,o,s=0;try{u=b.lex(n,p)}catch(t){return v(t)}o=u.length;var r=function(x){if(x){p.highlight=q;return v(x)}var w;try{w=f.parse(u,p)}catch(y){x=y}p.highlight=q;return x?v(x):v(null,w)};if(!q||q.length<3){return r()}delete p.highlight;if(!o){return r()}for(;s<u.length;s++){(function(w){if(w.type!=="code"){return --o||r()}return q(w.text,w.lang,function(y,x){if(y){return r(y)}if(x==null||x===w.text){return --o||r()}w.text=x;w.escaped=true;--o||r()})})(u[s])}return}try{if(p){p=j({},a.defaults,p)}return f.parse(b.lex(n,p),p)}catch(t){t.message+="\nPlease report this to https://github.com/chjj/marked.";if((p||a.defaults).silent){return"<p>An error occured:</p><pre>"+l(t.message+"",true)+"</pre>"}throw t}}a.options=a.setOptions=function(n){j(a.defaults,n);return a};a.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,sanitizer:null,mangle:true,smartLists:false,silent:false,highlight:null,langPrefix:"lang-",smartypants:false,headerPrefix:"",renderer:new g,xhtml:false};a.Parser=f;a.parser=f.parse;a.Renderer=g;a.Lexer=b;a.lexer=b.lex;a.InlineLexer=k;a.inlineLexer=k.output;a.parse=a;if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=a}else{if(typeof define==="function"&&define.amd){define(function(){return a})}else{this.marked=a}}}).call(function(){return this||(typeof window!=="undefined"?window:global)}());